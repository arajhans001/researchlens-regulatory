<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResearchLens Regulatory - AI-Powered Regulatory Intelligence</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <h1>üî¨ ResearchLens Regulatory</h1>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">Dashboard</button>
                <button class="nav-tab" data-tab="validation">Evidence Validation</button>
                <button class="nav-tab" data-tab="compliance">EU MDR Compliance</button>
                <button class="nav-tab" data-tab="intelligence">Strategic Intelligence</button>
                <button class="nav-tab" data-tab="alerts">Alerts</button>
            </nav>
        </div>
    </div>

    <div class="main-layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>Query & Filters</h3>
                <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>
            </div>
            
            <div class="query-section">
                <div class="form-group">
                    <label class="form-label">Research Query</label>
                    <textarea 
                        class="form-control" 
                        id="researchQuery" 
                        rows="3" 
                        placeholder="e.g., CAR-T cell therapy cardiac toxicity, drug-eluting stent efficacy, TAVR outcomes elderly patients"
                    ></textarea>
                </div>
                <button class="btn btn--primary btn--full-width" id="executeQuery">
                    üîç Analyze Literature
                </button>
            </div>

            <div class="filter-section">
                <div class="form-group">
                    <label class="form-label">Therapeutic Area</label>
                    <select class="form-control" id="therapeuticFilter">
                        <option value="all">All Areas</option>
                        <option value="cardiovascular">Cardiovascular</option>
                        <option value="oncology">Oncology</option>
                        <option value="neurology">Neurology</option>
                        <option value="orthopedic">Orthopedic</option>
                        <option value="diabetes">Diabetes</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Study Phase</label>
                    <select class="form-control" id="phaseFilter">
                        <option value="all">All Phases</option>
                        <option value="phase1">Phase I</option>
                        <option value="phase2">Phase II</option>
                        <option value="phase3">Phase III</option>
                        <option value="registry">Registry</option>
                        <option value="meta">Meta-analysis</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Evidence Quality</label>
                    <select class="form-control" id="qualityFilter">
                        <option value="all">All Quality</option>
                        <option value="high">High (‚â•80%)</option>
                        <option value="medium">Medium (60-79%)</option>
                        <option value="low">Low (<60%)</option>
                    </select>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="section-header">
                    <h2>Regulatory Intelligence Dashboard</h2>
                    <div class="live-controls">
                        <span class="live-indicator" style="color: #008c8a; font-weight: 500;">‚ö° Live Data</span>
                        <button class="btn btn--outline btn--sm" onclick="app.renderDashboard()">üîÑ Refresh</button>
                    </div>
                </div>

                <div class="live-feed-grid">
                    <div class="card">
                        <div class="card__header">
                            <h3>üìã FDA Guidance Updates</h3>
                            <span class="status status--success">Live</span>
                        </div>
                        <div class="card__body" id="guidanceList">
                            <div style="text-align: center; padding: 20px;">üîÑ Loading live FDA data...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>‚úÖ Approvals & Filings</h3>
                            <span class="status status--success">Active</span>
                        </div>
                        <div class="card__body" id="approvalsList">
                            <div style="text-align: center; padding: 20px;">üîÑ Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>üß™ Clinical Trial Milestones</h3>
                            <span class="status status--info">Monitoring</span>
                        </div>
                        <div class="card__body" id="trialsList">
                            <div style="text-align: center; padding: 20px;">üîÑ Loading...</div>
                        </div>
                    </div>
                </div>

                <div class="safety-ticker">
                    <div class="ticker-label">üö® Safety Signals:</div>
                    <div class="ticker-content" id="safetyTicker">
                        <div class="ticker-item">Loading live safety data...</div>
                    </div>
                </div>
            </div>

            <!-- Evidence Validation Tab -->
            <div id="validation" class="tab-content">
                <div class="section-header">
                    <h2>Evidence Validation Engine</h2>
                    <div class="search-controls">
                        <button class="btn btn--primary" id="validateEvidence">üî¨ Run Validation</button>
                        <button class="btn btn--outline" id="exportEvidence">üìÑ Export FDA Table</button>
                    </div>
                </div>

                <div class="query-results" id="queryResults" style="display: none;">
                    <div class="card">
                        <div class="card__header">
                            <h3>üìä Query Analysis Results</h3>
                            <span class="status status--success">Validated</span>
                        </div>
                        <div class="card__body" id="analysisContent">
                            <!-- Dynamic content will be inserted here -->
                        </div>
                    </div>
                </div>

                <div class="evidence-table-wrapper">
                    <table class="evidence-table">
                        <thead>
                            <tr>
                                <th>Study ID</th>
                                <th>Title</th>
                                <th>Phase</th>
                                <th>Design</th>
                                <th>Sample Size</th>
                                <th>Endpoint Success</th>
                                <th>Compliance Flags</th>
                                <th>Confidence Score</th>
                            </tr>
                        </thead>
                        <tbody id="evidenceTableBody">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- EU MDR Compliance Tab -->
            <div id="compliance" class="tab-content">
                <div class="section-header">
                    <h2>EU MDR Compliance Tracker</h2>
                    <div class="export-controls">
                        <button class="btn btn--primary" id="exportGSPR">üìã Export GSPR Matrix</button>
                        <button class="btn btn--outline" id="exportAudit">üìÑ Audit Trail</button>
                    </div>
                </div>

                <div class="compliance-table-wrapper">
                    <table class="compliance-table">
                        <thead>
                            <tr>
                                <th>Section</th>
                                <th>Status</th>
                                <th>Owner</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="complianceTableBody">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </div>

                <div id="complianceAlerts" class="alerts-container">
                    <!-- Dynamic alerts will be inserted here -->
                </div>
            </div>

            <!-- Strategic Intelligence Tab -->
            <div id="intelligence" class="tab-content">
                <div class="section-header">
                    <h2>Strategic Intelligence</h2>
                    <div class="alert-filters">
                        <button class="btn btn--primary" id="generateIntelligence">üéØ Generate Report</button>
                        <button class="btn btn--outline" id="pathwayWizard">üß≠ Pathway Wizard</button>
                    </div>
                </div>

                <div class="intelligence-grid">
                    <div class="card">
                        <div class="card__header">
                            <h3>üìà Approval Timeline Forecaster</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container" id="timelineChart">
                                <canvas id="approvalChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>üéØ Risk Factor Heatmap</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container" id="riskChart">
                                <canvas id="heatmapChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card pathway-card">
                        <div class="card__header">
                            <h3>üß≠ Regulatory Pathway Recommender</h3>
                        </div>
                        <div class="card__body">
                            <p>Get regulatory pathway recommendations based on your device/drug attributes.</p>
                            <div id="pathwayResult" class="pathway-result" style="display: none;">
                                <!-- Dynamic recommendations will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerts Tab -->
            <div id="alerts" class="tab-content">
                <div class="section-header">
                    <h2>Regulatory Alerts & Notifications</h2>
                    <div class="alert-filters">
                        <select class="form-control" style="width: auto;">
                            <option>All Alerts</option>
                            <option>High Priority</option>
                            <option>Safety Signals</option>
                            <option>Guidance Updates</option>
                        </select>
                        <button class="btn btn--outline">Mark All Read</button>
                    </div>
                </div>

                <div id="alertsList" class="alerts-container">
                    <!-- Dynamic alerts will be inserted here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Study Detail Drawer -->
    <div class="drawer" id="studyDrawer">
        <div class="drawer-header">
            <h3>Study Details</h3>
            <button class="drawer-close" id="closeDrawer">&times;</button>
        </div>
        <div class="drawer-content" id="drawerContent">
            <!-- Dynamic study details will be inserted here -->
        </div>
    </div>

    <!-- Pathway Wizard Modal -->
    <div class="modal hidden" id="pathwayModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Regulatory Pathway Wizard</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="wizard-step">
                    <label class="form-label">Device/Drug Type</label>
                    <select class="form-control" id="productType">
                        <option value="device-class2">Class II Medical Device</option>
                        <option value="device-class3">Class III Medical Device</option>
                        <option value="drug-small">Small Molecule Drug</option>
                        <option value="biologic">Biologic/Biosimilar</option>
                    </select>
                </div>
                <div class="wizard-step">
                    <label class="form-label">Risk Level</label>
                    <select class="form-control" id="riskLevel">
                        <option value="low">Low Risk</option>
                        <option value="moderate">Moderate Risk</option>
                        <option value="high">High Risk</option>
                    </select>
                </div>
                <div class="wizard-step">
                    <label class="form-label">Target Market</label>
                    <select class="form-control" id="targetMarket">
                        <option value="us">United States (FDA)</option>
                        <option value="eu">European Union (EMA)</option>
                        <option value="global">Global (FDA + EMA)</option>
                    </select>
                </div>
                <button class="btn btn--primary" id="wizardNext">Generate Pathway</button>
                <div class="wizard-result hidden" id="wizardResult">
                    <!-- Dynamic pathway results will appear here -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
